{"version":3,"file":"index.js","sources":["../src/nep9.js","../src/cache-promise.js","../src/nep5.js","../src/qrcode.js","../src/index.js"],"sourcesContent":["export function generateUri(address, properties) {\n\tif (!address) {\n  \treturn;\n\t}\n\n\tlet output = `neo:${address}`\n\tif (properties) {\n\t\toutput += serializeQuery(properties);\n\t}\n\n  return output;\n}\n\nfunction serializeQuery(query) {\n\n\tconst parameters = Object.keys(query).reduce((accum, key) => {\n    const value = query[key];\n    accum.push(`${key}=${value}`);\n    return accum;\n  }, []);\n\n\treturn parameters.length ? `?${parameters.join('&')}` : '';\n}\n","import lruCache from 'lru-cache';\n\nexport const STATUS = {\n  initialized: 'initialized',\n  fetching: 'fetching',\n  fetched: 'fetched',\n  fetchFailed: 'fetch failed',\n};\n\nexport class CacheItem {\n  constructor(opts) {\n    this.key = opts.key;\n    this.value = opts.value;\n    this.fetchFunction = opts.fetchFunction;\n    this.init();\n  }\n\n  init(status = STATUS.initialized) {\n    this.status = status;\n    this.resolvers = [];\n    this.rejectors = [];\n    return this.rejectors;\n  }\n\n  fetch() {\n    return Promise.resolve().then(() => {\n      if (this.status === STATUS.fetchFailed) {\n        this.init();\n      }\n      if (this.status === STATUS.fetched || !this.fetchFunction) {\n        // Return the current value\n        return this.value;\n      }\n      // Add a promise to the list of promises awaiting fetch completion\n      const p = new Promise((resolve, reject) => {\n        this.resolvers.push(resolve);\n        return this.rejectors.push(reject);\n      });\n      if (this.status === STATUS.initialized) {\n        // Call the fetch function\n        this.status = STATUS.fetching;\n        Promise.resolve().then(() => this.fetchFunction(this.key)).then((value) => {\n          this.value = value;\n          this.status = STATUS.fetched;\n          const ref = this.resolvers;\n          const results = [];\n          for (let i = 0, len = ref.length; i < len; i++) {\n            const r = ref[i];\n            results.push(r(value));\n          }\n          this.init(this.status);\n          return results;\n        }).catch((err) => {\n          this.status = STATUS.fetchFailed;\n          const ref = this.rejectors;\n          const results = [];\n          for (let i = 0, len = ref.length; i < len; i++) {\n            const r = ref[i];\n            results.push(r(err));\n          }\n          this.init(this.status);\n          return results;\n        });\n      }\n      return p;\n    });\n  }\n}\n\nexport default function (opts) {\n  const cache = lruCache(opts);\n  cache.getAsync = function getAsync(key, fetchFunction) {\n    let item;\n    item = cache.get(key);\n    if (item === undefined && fetchFunction) {\n      // Create a new cache item\n      item = new CacheItem({\n        key,\n        fetchFunction,\n      });\n      cache.set(key, item);\n    }\n    if (!(item instanceof CacheItem)) {\n      return Promise.resolve(item);\n    }\n    return item.fetch();\n  };\n  return cache;\n}\n","export default {\n  \"7f86d61ff377f1b12e589a5907152b57e2ad9a7a\": \"ACAT\",\n  \"a0777c3ce2b169d4a23bcba4565e3225a0122d95\": \"APH\",\n  \"7cd338644833db2fd8824c410e364890d179e6f8\": \"APT\",\n  \"a58b56b30425d3d1f8902034996fcac4168ef71d\": \"ASA\",\n  \"546c5872a992b2754ef327154f4c119baabff65f\": \"BCS\",\n  \"891daf0e1750a1031ebe23030828ad7781d874d6\": \"IAM\",\n  \"34579e4614ac1a7bd295372d3de8621770c76cdc\": \"CGE\",\n  \"45d493a6f73fa5f404244a5fb8472fc014ca5885\": \"CPX\",\n  \"b951ecbbc5fe37a9c280a76cb0ce0014827294cf\": \"DBC\",\n  \"81c089ab996fc89c468a26c0a88d23ae2f34b5c0\": \"EDS\",\n  \"acbc532904b6b51b5ea6d19b803d78af70e7e6f9\": \"EFX\",\n  \"e8f98440ad0d7a6e76d84fb1c3d3f8a16e162e97\": \"EXT\",\n  \"d1e37547d88bc9607ff9d73116ebd9381c156f79\": \"GDM\",\n  \"9577c3f972d769220d69d1c4ddbd617c44d067aa\": \"GALA\",\n  \"06fa8be9b6609d963e8fc63977b9f8dc5f10895f\": \"LRN\",\n  \"a87cc2a513f5d8b4a42432343687c2127c60bc3f\": \"MCT\",\n  \"c36aee199dbba6c3f439983657558cfb67629599\": \"NKN\",\n  \"a721d5893480260bd28ca1f395f2c465d0b5b1c2\": \"NRVE\",\n  \"ceab719b8baa2310f232ee0d277c061704541cfb\": \"ONT\",\n  \"0e86a40588f715fcaf7acd1812d50af478e6e917\": \"OBT\",\n  \"ed07cffad18f1308db51920d99a2af60ac66a7b3\": \"SOUL\",\n  \"af7c7328eee5a275a3bcaee2bf0cf662b5e739be\": \"PKC\",\n  \"0d821bd7b6d53f5c2b40e217c6defc8bbe896cf5\": \"QLC\",\n  \"ecc6b20d3ccac1ee9ef109af5a7cdb85706b1df9\": \"RPX\",\n  \"2328008e6f6c7bd157a342e789389eb034d9cbc4\": \"RHT\",\n  \"ab38352559b8b203bde5fddfa0b07d8b2525e132\": \"SWTH\",\n  \"78e6d16b914fe15bc16150aeb11d0c2a8e532bdd\": \"SWH\",\n  \"132947096727c84c7f9e076c90f08fec3bc17f18\": \"TKY\",\n  \"67a5086bac196b67d5fd20745b0dc9db4d2930ed\": \"THOR\",\n  \"de2ed49b691e76754c20fe619d891b78ef58e537\": \"AVA\",\n  \"08e8c4400f1af2c20c28e0018f29535eb85d15b6\": \"TNC\",\n  \"40bb36a54bf28872b6ffdfa7fbc6480900e58448\": \"WWB\",\n  \"6eca2c4bd2b3ed97b2aa41b26128a40ce2bd8d1a\": \"XQTA\",\n  \"ac116d4b8d4ca55e6b6d4ecce2192039b51cccc5\": \"ZPT\"\n};\n","import Jimp from 'jimp';\nimport dataUriToBuffer from 'data-uri-to-buffer';\nimport QRCode from 'qrcode';\nimport path from 'path';\nimport cachePromise from './cache-promise';\nimport nep5 from './nep5';\n\nfunction createImageFromDataUri(dataUri) {\n  return new Promise((resolve) => {\n    new Jimp(dataUriToBuffer(dataUri), (err, img) => {\n      if (err) throw err;\n      resolve(img);\n    });\n  });\n}\n\nfunction createQRCode(uri, options) {\n  // FIXME: it works. But it could be more efficient.\n  // The npm qrcode module cannot output just a buffer.\n  // So we need to pass through base64 encoding.\n  // To fix this, we need to create a PR on qrcode to support output as a buffer.\n  return new Promise(resolve => {\n    QRCode.toDataURL(uri, options, (err, response) => {\n      if (err) throw err;\n      resolve(createImageFromDataUri(response));\n    });\n  });\n}\n\nexport const cacheLogo = cachePromise();\nexport const cacheLogoResized = cachePromise();\n\nfunction fetchLogo(_logoPath, isLocal) {\n  if (isLocal) {\n    _logoPath = _logoPath[0] === '/' || _logoPath[0] === '\\\\' ? _logoPath : path.resolve(__dirname, _logoPath);\n  }\n  return Jimp.read(_logoPath)\n  .catch(() => Jimp.read('https://cdn.o3.network/img/nep5icons/NEO.png'));\n}\n\nfunction resizeSquared(img, _w, _h) {\n  let w;\n  let h;\n\n  if (_h > _w) {\n    w = Jimp.AUTO;\n    h = _h;\n  } else {\n    w = _w;\n    h = Jimp.AUTO;\n  }\n  return img.resize(w, h);\n}\n\nfunction getResizedLogo({\n  src, w, h, ignoreCache = false, isLocal\n}) {\n  if (ignoreCache) {\n    return fetchLogo(src, isLocal).then(img => resizeSquared(img, w, h));\n  }\n  const resizedLogoKey = `${w}x${h}-${src}`;\n  return cacheLogoResized.getAsync(resizedLogoKey, async () => {\n    const logoFullImg = await cacheLogo.getAsync(src, () => fetchLogo(src, isLocal));\n    return resizeSquared(logoFullImg.clone(), w, h);\n  });\n}\n\nfunction getLogoUrl(asset) {\n  if (!asset) {\n    return 'https://cdn.o3.network/img/nep5icons/NEO.png';\n  } else if (asset.toLowerCase() === 'neo' || asset.toLowerCase() === 'gas') {\n    return `https://cdn.o3.network/img/nep5icons/${asset.toUpperCase()}.png`;\n  } else {\n    const symbol = nep5[asset] || 'NEO';\n    return `https://cdn.o3.network/img/nep5icons/${symbol.toUpperCase()}.png`;\n  }\n}\n\nexport default function generate({uri, asset, qrCodeOptions, ratio}) {\n  return createQRCode(uri, qrCodeOptions)\n  .then(img => {\n    return Promise.all([\n      img,\n      getResizedLogo({\n        src: '../assets/blankSquare.png',\n        w: Math.floor(img.bitmap.width / (ratio - 0.5)),\n        h: Math.floor(img.bitmap.height / (ratio - 0.5)),\n        isLocal: true,\n      }),\n      getResizedLogo({\n        src: getLogoUrl(asset),\n        w: Math.floor(img.bitmap.width / ratio),\n        h: Math.floor(img.bitmap.height / ratio),\n      }),\n    ])\n    .catch(err => {\n      throw err\n    })\n  })\n  .then(data => {\n    const img = data[0]\n    const logoBg = data[1]\n    const logo = data[2]\n    // Center the logo bg\n    const x_bg = Math.floor((img.bitmap.width - logoBg.bitmap.width) / 2);\n    const y_bg = Math.floor((img.bitmap.height - logoBg.bitmap.height) / 2);\n\n    const qrBgImg = img.composite(logoBg, x_bg, y_bg);\n\n    // Center the logo\n    const x = Math.floor((img.bitmap.width - logo.bitmap.width) / 2);\n    const y = Math.floor((img.bitmap.height - logo.bitmap.height) / 2);\n\n    // Apply on the QRCode\n    const qrImg = qrBgImg.composite(logo, x, y);\n\n    return new Promise((resolve, reject) => {\n      qrImg.getBuffer(Jimp.MIME_PNG, (err, buf) => {\n        if (err) return rej(err);\n        return resolve(buf);\n      });\n    });\n  });\n}\n","import { generateUri } from './nep9';\nimport generateQrCode from './qrcode';\n\nmodule.exports = {\n  generateUri,\n  generateQrCode\n}\n"],"names":["generateUri","address","properties","output","serializeQuery","query","parameters","Object","keys","reduce","accum","key","value","push","length","join","STATUS","CacheItem","opts","fetchFunction","init","status","initialized","resolvers","rejectors","Promise","resolve","then","fetchFailed","fetched","p","reject","fetching","ref","results","i","len","r","catch","err","cache","lruCache","getAsync","item","get","undefined","set","fetch","createImageFromDataUri","dataUri","Jimp","dataUriToBuffer","img","createQRCode","uri","options","toDataURL","response","cacheLogo","cachePromise","cacheLogoResized","fetchLogo","_logoPath","isLocal","path","__dirname","read","resizeSquared","_w","_h","w","h","AUTO","resize","getResizedLogo","ignoreCache","src","resizedLogoKey","logoFullImg","clone","getLogoUrl","asset","toLowerCase","toUpperCase","symbol","nep5","generate","qrCodeOptions","ratio","all","Math","floor","bitmap","width","height","data","logoBg","logo","x_bg","y_bg","qrBgImg","composite","x","y","qrImg","getBuffer","MIME_PNG","buf","rej","module","exports"],"mappings":";;;;;;;;;;AAAO,SAASA,WAAT,CAAqBC,OAArB,EAA8BC,UAA9B,EAA0C;KAC5C,CAACD,OAAL,EAAc;;;;KAIVE,SAAU,OAAMF,OAAQ,EAA5B;KACIC,UAAJ,EAAgB;YACLE,eAAeF,UAAf,CAAV;;;QAGOC,MAAP;;;AAGF,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;;OAExBC,aAAaC,OAAOC,IAAP,CAAYH,KAAZ,EAAmBI,MAAnB,CAA0B,CAACC,KAAD,EAAQC,GAAR,KAAgB;QACpDC,QAAQP,MAAMM,GAAN,CAAd;QACME,IAAN,CAAY,GAAEF,GAAI,IAAGC,KAAM,EAA3B;SACOF,KAAP;EAHgB,EAIf,EAJe,CAAnB;;QAMOJ,WAAWQ,MAAX,GAAqB,IAAGR,WAAWS,IAAX,CAAgB,GAAhB,CAAqB,EAA7C,GAAiD,EAAxD;;;ACnBM,MAAMC,SAAS;eACP,aADO;YAEV,UAFU;WAGX,SAHW;eAIP;CAJR;;AAOP,AAAO,MAAMC,SAAN,CAAgB;cACTC,IAAZ,EAAkB;SACXP,GAAL,GAAWO,KAAKP,GAAhB;SACKC,KAAL,GAAaM,KAAKN,KAAlB;SACKO,aAAL,GAAqBD,KAAKC,aAA1B;SACKC,IAAL;;;OAGGC,SAASL,OAAOM,WAArB,EAAkC;SAC3BD,MAAL,GAAcA,MAAd;SACKE,SAAL,GAAiB,EAAjB;SACKC,SAAL,GAAiB,EAAjB;WACO,KAAKA,SAAZ;;;UAGM;WACCC,QAAQC,OAAR,GAAkBC,IAAlB,CAAuB,MAAM;UAC9B,KAAKN,MAAL,KAAgBL,OAAOY,WAA3B,EAAwC;aACjCR,IAAL;;UAEE,KAAKC,MAAL,KAAgBL,OAAOa,OAAvB,IAAkC,CAAC,KAAKV,aAA5C,EAA2D;;eAElD,KAAKP,KAAZ;;;YAGIkB,IAAI,IAAIL,OAAJ,CAAY,CAACC,OAAD,EAAUK,MAAV,KAAqB;aACpCR,SAAL,CAAeV,IAAf,CAAoBa,OAApB;eACO,KAAKF,SAAL,CAAeX,IAAf,CAAoBkB,MAApB,CAAP;OAFQ,CAAV;UAII,KAAKV,MAAL,KAAgBL,OAAOM,WAA3B,EAAwC;;aAEjCD,MAAL,GAAcL,OAAOgB,QAArB;gBACQN,OAAR,GAAkBC,IAAlB,CAAuB,MAAM,KAAKR,aAAL,CAAmB,KAAKR,GAAxB,CAA7B,EAA2DgB,IAA3D,CAAiEf,KAAD,IAAW;eACpEA,KAAL,GAAaA,KAAb;eACKS,MAAL,GAAcL,OAAOa,OAArB;gBACMI,MAAM,KAAKV,SAAjB;gBACMW,UAAU,EAAhB;eACK,IAAIC,IAAI,CAAR,EAAWC,MAAMH,IAAInB,MAA1B,EAAkCqB,IAAIC,GAAtC,EAA2CD,GAA3C,EAAgD;kBACxCE,IAAIJ,IAAIE,CAAJ,CAAV;oBACQtB,IAAR,CAAawB,EAAEzB,KAAF,CAAb;;eAEGQ,IAAL,CAAU,KAAKC,MAAf;iBACOa,OAAP;SAVF,EAWGI,KAXH,CAWUC,GAAD,IAAS;eACXlB,MAAL,GAAcL,OAAOY,WAArB;gBACMK,MAAM,KAAKT,SAAjB;gBACMU,UAAU,EAAhB;eACK,IAAIC,IAAI,CAAR,EAAWC,MAAMH,IAAInB,MAA1B,EAAkCqB,IAAIC,GAAtC,EAA2CD,GAA3C,EAAgD;kBACxCE,IAAIJ,IAAIE,CAAJ,CAAV;oBACQtB,IAAR,CAAawB,EAAEE,GAAF,CAAb;;eAEGnB,IAAL,CAAU,KAAKC,MAAf;iBACOa,OAAP;SApBF;;aAuBKJ,CAAP;KAvCK,CAAP;;;;AA4CJ,AAAe,uBAAUZ,IAAV,EAAgB;QACvBsB,QAAQC,SAASvB,IAAT,CAAd;QACMwB,QAAN,GAAiB,SAASA,QAAT,CAAkB/B,GAAlB,EAAuBQ,aAAvB,EAAsC;QACjDwB,IAAJ;WACOH,MAAMI,GAAN,CAAUjC,GAAV,CAAP;QACIgC,SAASE,SAAT,IAAsB1B,aAA1B,EAAyC;;aAEhC,IAAIF,SAAJ,CAAc;WAAA;;OAAd,CAAP;YAIM6B,GAAN,CAAUnC,GAAV,EAAegC,IAAf;;QAEE,EAAEA,gBAAgB1B,SAAlB,CAAJ,EAAkC;aACzBQ,QAAQC,OAAR,CAAgBiB,IAAhB,CAAP;;WAEKA,KAAKI,KAAL,EAAP;GAdF;SAgBOP,KAAP;;;ACvFF,WAAe;8CAC+B,MAD/B;8CAE+B,KAF/B;8CAG+B,KAH/B;8CAI+B,KAJ/B;8CAK+B,KAL/B;8CAM+B,KAN/B;8CAO+B,KAP/B;8CAQ+B,KAR/B;8CAS+B,KAT/B;8CAU+B,KAV/B;8CAW+B,KAX/B;8CAY+B,KAZ/B;8CAa+B,KAb/B;8CAc+B,MAd/B;8CAe+B,KAf/B;8CAgB+B,KAhB/B;8CAiB+B,KAjB/B;8CAkB+B,MAlB/B;8CAmB+B,KAnB/B;8CAoB+B,KApB/B;8CAqB+B,MArB/B;8CAsB+B,KAtB/B;8CAuB+B,KAvB/B;8CAwB+B,KAxB/B;8CAyB+B,KAzB/B;8CA0B+B,MA1B/B;8CA2B+B,KA3B/B;8CA4B+B,KA5B/B;8CA6B+B,MA7B/B;8CA8B+B,KA9B/B;8CA+B+B,KA/B/B;8CAgC+B,KAhC/B;8CAiC+B,MAjC/B;8CAkC+B;CAlC9C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACOA,SAASQ,sBAAT,CAAgCC,OAAhC,EAAyC;SAChC,IAAIxB,OAAJ,CAAaC,OAAD,IAAa;QAC1BwB,IAAJ,CAASC,gBAAgBF,OAAhB,CAAT,EAAmC,CAACV,GAAD,EAAMa,GAAN,KAAc;UAC3Cb,GAAJ,EAAS,MAAMA,GAAN;cACDa,GAAR;KAFF;GADK,CAAP;;;AAQF,SAASC,YAAT,CAAsBC,GAAtB,EAA2BC,OAA3B,EAAoC;;;;;SAK3B,IAAI9B,OAAJ,CAAYC,WAAW;WACrB8B,SAAP,CAAiBF,GAAjB,EAAsBC,OAAtB,EAA+B,CAAChB,GAAD,EAAMkB,QAAN,KAAmB;UAC5ClB,GAAJ,EAAS,MAAMA,GAAN;cACDS,uBAAuBS,QAAvB,CAAR;KAFF;GADK,CAAP;;;AAQF,AAAO,MAAMC,YAAYC,cAAlB;AACP,AAAO,MAAMC,mBAAmBD,cAAzB;;AAEP,SAASE,SAAT,CAAmBC,SAAnB,EAA8BC,OAA9B,EAAuC;MACjCA,OAAJ,EAAa;gBACCD,UAAU,CAAV,MAAiB,GAAjB,IAAwBA,UAAU,CAAV,MAAiB,IAAzC,GAAgDA,SAAhD,GAA4DE,KAAKtC,OAAL,CAAauC,SAAb,EAAwBH,SAAxB,CAAxE;;SAEKZ,KAAKgB,IAAL,CAAUJ,SAAV,EACNxB,KADM,CACA,MAAMY,KAAKgB,IAAL,CAAU,8CAAV,CADN,CAAP;;;AAIF,SAASC,aAAT,CAAuBf,GAAvB,EAA4BgB,EAA5B,EAAgCC,EAAhC,EAAoC;MAC9BC,CAAJ;MACIC,CAAJ;;MAEIF,KAAKD,EAAT,EAAa;QACPlB,KAAKsB,IAAT;QACIH,EAAJ;GAFF,MAGO;QACDD,EAAJ;QACIlB,KAAKsB,IAAT;;SAEKpB,IAAIqB,MAAJ,CAAWH,CAAX,EAAcC,CAAd,CAAP;;;AAGF,SAASG,cAAT,CAAwB;KAAA,EACjBJ,CADiB,EACdC,CADc,EACXI,cAAc,KADH,EACUZ;CADlC,EAEG;MACGY,WAAJ,EAAiB;WACRd,UAAUe,GAAV,EAAeb,OAAf,EAAwBpC,IAAxB,CAA6ByB,OAAOe,cAAcf,GAAd,EAAmBkB,CAAnB,EAAsBC,CAAtB,CAApC,CAAP;;QAEIM,iBAAkB,GAAEP,CAAE,IAAGC,CAAE,IAAGK,GAAI,EAAxC;SACOhB,iBAAiBlB,QAAjB,CAA0BmC,cAA1B,mBAA0C,aAAY;UACrDC,cAAc,MAAMpB,UAAUhB,QAAV,CAAmBkC,GAAnB,EAAwB;aAAMf,UAAUe,GAAV,EAAeb,OAAf,CAAN;KAAxB,CAA1B;WACOI,cAAcW,YAAYC,KAAZ,EAAd,EAAmCT,CAAnC,EAAsCC,CAAtC,CAAP;GAFK,EAAP;;;AAMF,SAASS,UAAT,CAAoBC,KAApB,EAA2B;MACrB,CAACA,KAAL,EAAY;WACH,8CAAP;GADF,MAEO,IAAIA,MAAMC,WAAN,OAAwB,KAAxB,IAAiCD,MAAMC,WAAN,OAAwB,KAA7D,EAAoE;WACjE,wCAAuCD,MAAME,WAAN,EAAoB,MAAnE;GADK,MAEA;UACCC,SAASC,KAAKJ,KAAL,KAAe,KAA9B;WACQ,wCAAuCG,OAAOD,WAAP,EAAqB,MAApE;;;;AAIJ,AAAe,SAASG,QAAT,CAAkB,EAAChC,GAAD,EAAM2B,KAAN,EAAaM,aAAb,EAA4BC,KAA5B,EAAlB,EAAsD;SAC5DnC,aAAaC,GAAb,EAAkBiC,aAAlB,EACN5D,IADM,CACDyB,OAAO;WACJ3B,QAAQgE,GAAR,CAAY,CACjBrC,GADiB,EAEjBsB,eAAe;WACR,2BADQ;SAEVgB,KAAKC,KAAL,CAAWvC,IAAIwC,MAAJ,CAAWC,KAAX,IAAoBL,QAAQ,GAA5B,CAAX,CAFU;SAGVE,KAAKC,KAAL,CAAWvC,IAAIwC,MAAJ,CAAWE,MAAX,IAAqBN,QAAQ,GAA7B,CAAX,CAHU;eAIJ;KAJX,CAFiB,EAQjBd,eAAe;WACRM,WAAWC,KAAX,CADQ;SAEVS,KAAKC,KAAL,CAAWvC,IAAIwC,MAAJ,CAAWC,KAAX,GAAmBL,KAA9B,CAFU;SAGVE,KAAKC,KAAL,CAAWvC,IAAIwC,MAAJ,CAAWE,MAAX,GAAoBN,KAA/B;KAHL,CARiB,CAAZ,EAcNlD,KAdM,CAcAC,OAAO;YACNA,GAAN;KAfK,CAAP;GAFK,EAoBNZ,IApBM,CAoBDoE,QAAQ;UACN3C,MAAM2C,KAAK,CAAL,CAAZ;UACMC,SAASD,KAAK,CAAL,CAAf;UACME,OAAOF,KAAK,CAAL,CAAb;;UAEMG,OAAOR,KAAKC,KAAL,CAAW,CAACvC,IAAIwC,MAAJ,CAAWC,KAAX,GAAmBG,OAAOJ,MAAP,CAAcC,KAAlC,IAA2C,CAAtD,CAAb;UACMM,OAAOT,KAAKC,KAAL,CAAW,CAACvC,IAAIwC,MAAJ,CAAWE,MAAX,GAAoBE,OAAOJ,MAAP,CAAcE,MAAnC,IAA6C,CAAxD,CAAb;;UAEMM,UAAUhD,IAAIiD,SAAJ,CAAcL,MAAd,EAAsBE,IAAtB,EAA4BC,IAA5B,CAAhB;;;UAGMG,IAAIZ,KAAKC,KAAL,CAAW,CAACvC,IAAIwC,MAAJ,CAAWC,KAAX,GAAmBI,KAAKL,MAAL,CAAYC,KAAhC,IAAyC,CAApD,CAAV;UACMU,IAAIb,KAAKC,KAAL,CAAW,CAACvC,IAAIwC,MAAJ,CAAWE,MAAX,GAAoBG,KAAKL,MAAL,CAAYE,MAAjC,IAA2C,CAAtD,CAAV;;;UAGMU,QAAQJ,QAAQC,SAAR,CAAkBJ,IAAlB,EAAwBK,CAAxB,EAA2BC,CAA3B,CAAd;;WAEO,IAAI9E,OAAJ,CAAY,CAACC,OAAD,EAAUK,MAAV,KAAqB;YAChC0E,SAAN,CAAgBvD,KAAKwD,QAArB,EAA+B,CAACnE,GAAD,EAAMoE,GAAN,KAAc;YACvCpE,GAAJ,EAAS,OAAOqE,IAAIrE,GAAJ,CAAP;eACFb,QAAQiF,GAAR,CAAP;OAFF;KADK,CAAP;GArCK,CAAP;;;AC5EFE,OAAOC,OAAP,GAAiB;aAAA;;CAAjB"}